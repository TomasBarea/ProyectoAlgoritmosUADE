<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Iniciar Sesión</title>
     <link rel="stylesheet" href="/Styles/login.css">
    <script>
        async function validarFormulario(event) {
            event.preventDefault(); 
            const usuario = document.getElementById('usuario').value;
            const clave = document.getElementById('clave').value;

          
            const response = await fetch(`/validar?usuario=${encodeURIComponent(usuario)}&clave=${encodeURIComponent(clave)}`);
            const data = await response.json();

            if (response.status === 400) {
             
                alert(`Errores: ${data.errores.join(', ')}`);
            } else {
               
                alert(data.mensaje);
                window.location.href = "../index.html";
            }
        }
    </script>
</head>
<body>
    <nav class="nav">
  
        <ul class="links">
            <li><a href="./index.html">Home</a></li>
            <li><a href="./Pages/sobreNos.html">Sobre Nosotros</a></li>
            <li><a href="./Pages/contacto.html">Contacto</a></li>
        </ul>
        <h4 class="titulo">HYPE RESELLERS</h4>
        <ul class="items">
            <li><a>Usuario</a></li>
            <li> <div id="cartContainer" style="position: relative; display: inline-block;">
                <img src="/static/img/shopping-cart_4058250.png" id="cartIcon" alt="Carrito" style="width: 30px; cursor: pointer;">
                <span id="cartCount" style="
                  position: absolute;
                  top: -8px;
                  right: -8px;
                  background: red;
                  color: white;
                  border-radius: 50%;
                  padding: 2px 6px;
                  font-size: 12px;
                  display: none;
                ">0</span>
              </div>
            </li>
        </ul>
    </nav>
    <div class="contenedorr-login">
        <h2>Iniciar Sesión</h2>
        <form onsubmit="validarFormulario(event)" class="formulario-login">
            <div class="campo">
                <label for="usuario">Usuario:</label>
                <br>
                <input type="text" id="usuario" name="usuario" required>
            </div>

            <div class="campo">
                <label for="clave">Contraseña:</label>
                <br>
                <input type="password" id="clave" name="clave" required>
            </div>

            <button type="submit" class="boton">Entrar</button>
        </form>

        <p class="link">
            ¿No tenés cuenta? <a href="registro.html">Registrate acá</a>
        </p>
    </div>
</body>
</html>